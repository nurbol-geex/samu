{"version":3,"names":["_sovranReactNative","require","_constants","_plugin","_types","_util","_errors","QueueFlushingPlugin","UtilityPlugin","type","PluginType","after","isPendingUpload","timeoutWarned","constructor","onFlush","storeKey","restoreTimeout","promise","resolve","createPromise","isRestored","isRestoredResolve","configure","analytics","config","getConfig","defaultConfig","queueStore","createStore","events","persist","storeId","writeKey","persistor","storePersistor","saveDelay","storePersistorSaveDelay","onInitialized","execute","event","dispatch","state","flush","logger","info","e","reportInternalError","SegmentError","ErrorType","InitializationError","warn","getState","dequeue","eventsToRemove","Array","isArray","length","setToRemove","Set","filteredEvents","filter","has","exports"],"sourceRoot":"../../../src","sources":["plugins/QueueFlushingPlugin.ts"],"mappings":"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"}
