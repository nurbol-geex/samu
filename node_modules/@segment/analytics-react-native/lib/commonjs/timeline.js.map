{"version":3,"names":["_types","require","_util","_errors","PLUGIN_ORDER","PluginType","before","enrichment","destination","after","Timeline","plugins","add","plugin","type","push","settings","analytics","get","hasInitialSettings","undefined","update","integrations","UpdateType","initial","onChange","newSettings","refresh","remove","index","findIndex","f","splice","apply","closure","getAllPlugins","forEach","process","incomingEvent","result","key","pluginResult","applyPlugins","event","execute","error","reportInternalError","SegmentError","ErrorType","PluginError","JSON","stringify","logger","warn","exports"],"sourceRoot":"../../src","sources":["timeline.ts"],"mappings":"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"}
