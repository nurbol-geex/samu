{"version":3,"names":["deepmerge","AppState","settingsCDN","workspaceDestinationFilterKey","defaultFlushInterval","defaultFlushAt","getContext","createAliasEvent","createGroupEvent","createIdentifyEvent","createScreenEvent","createTrackEvent","CountFlushPolicy","Observable","TimerFlushPolicy","FlushPolicyExecuter","SegmentDestination","createGetter","Timeline","EventType","PluginType","allSettled","getPluginsWithFlush","getPluginsWithReset","getURL","getUUID","checkResponseForErrors","ErrorType","SegmentError","translateHTTPError","SegmentClient","appState","destroyed","isAddingPlugins","pluginsToAdd","flushPolicyExecuter","flush","onPluginAddedObservers","platformPlugins","isReady","getPlugins","ofType","plugins","timeline","undefined","before","enrichment","utility","destination","after","getConfig","config","constructor","logger","store","context","get","set","onChange","adTrackingEnabled","device","callback","settings","consentSettings","edgeFunctionSettings","filters","userInfo","deepLinkData","autoAddSegmentDestination","segmentDestination","add","plugin","forEach","setupLifecycleEvents","storageReady","Promise","resolve","value","init","warn","fetchSettings","checkInstalledVersion","trackDeepLinks","onReady","error","reportInternalError","InitializationError","generateFiltersMap","rules","map","r","key","destinationName","getEndpointForSettings","settingsPrefix","settingsEndpoint","hasProxy","cdnProxy","useSegmentEndpoints","Boolean","isCdnProxyEndsWithSlash","endsWith","writeKey","console","settingsURL","res","fetch","headers","resJson","json","integrations","edgeFunction","middlewareSettings","routingRules","info","all","e","defaultSettings","cleanup","appStateSubscription","remove","addEventListener","nextAppState","handleAppStateChange","apply","closure","type","push","addPlugin","configure","triggerOnPluginLoaded","process","incomingEvent","event","applyRawEventData","startTimelineProcessing","pendingEvents","applyContextData","notify","deepLinkProperties","trackDeepLinkEvent","data","url","properties","length","setupFlushPolicies","pending","manualFlush","reset","promises","results","status","FlushError","reason","screen","name","options","track","eventName","identify","userId","userTraits","group","groupId","groupTraits","alias","newUserId","anonymousId","previousUserId","previousContext","trackAppLifecycleEvents","app","version","build","previous_version","previous_build","from_background","includes","resetAnonymousId","currentId","traits","ResetError","onPluginLoaded","i","splice","f","flushPolicies","flushAt","flushInterval","fp","addFlushPolicy","policies","policy","removeFlushPolicy","getFlushPolicies","fatal","errorHandler","messageId","timestamp","Date","toISOString","processUserInfo","IdentifyEvent","state","AliasEvent","previousId"],"sourceRoot":"../../src","sources":["analytics.ts"],"mappings":"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"}
