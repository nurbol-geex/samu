{"version":3,"names":["createStore","defaultConfig","UtilityPlugin","PluginType","createPromise","ErrorType","SegmentError","QueueFlushingPlugin","type","after","isPendingUpload","timeoutWarned","constructor","onFlush","storeKey","restoreTimeout","promise","resolve","isRestored","isRestoredResolve","configure","analytics","config","getConfig","queueStore","events","persist","storeId","writeKey","persistor","storePersistor","saveDelay","storePersistorSaveDelay","onInitialized","execute","event","dispatch","state","flush","logger","info","e","reportInternalError","InitializationError","warn","getState","dequeue","eventsToRemove","Array","isArray","length","setToRemove","Set","filteredEvents","filter","has"],"sourceRoot":"../../../src","sources":["plugins/QueueFlushingPlugin.ts"],"mappings":"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"}
